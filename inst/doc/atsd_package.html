<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="date" content="2018-01-29" />

<title>How to Use the atsd Package to Communicate with Axibase Time-Series Database</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">How to Use the atsd Package to Communicate with Axibase Time-Series Database</h1>
<h4 class="date"><em>2018-01-29</em></h4>



<section id="contents" class="level2">
<h2><a name="contents"></a>Contents</h2>
<ol type="1">
<li><a href="#overview">Package Overview</a></li>
<li><a href="#connecting">Connecting to ATSD</a></li>
<li><a href="#querying">Querying ATSD</a></li>
<li><a href="#zoo">Transforming Data Frame to zoo Object</a></li>
<li><a href="#metrics">Getting Metrics</a></li>
<li><a href="#entities">Getting Entities</a></li>
<li><a href="#gtst">Getting Time Series Tags</a></li>
<li><a href="#saving_ts">Saving time series in ATSD</a></li>
<li><a href="#expression">Expression Syntax</a></li>
<li><a href="#advanced">Advanced Connection Options</a></li>
</ol>
</section>
<section id="package-overview" class="level2">
<h2>1. <a name="overview"></a> Package Overview</h2>
<p>The package allows you query time-series data and statistics from <a href="http://axibase.com/axibase-time-series-database/">Axibase Time-Series Database</a> (ATSD) and save time-series data in ATSD. List of package functions:</p>
<ul>
<li><a href="#set_connection">set_connection()</a>, <a href="#save_connection">save_connection()</a>, <a href="#show_connection">show_connection()</a> – are used to manage the connection with ATSD. Set up and store the url, user name, and password. Configure cryptographic protocol and enforce SSL certificate validation in the case of https connection.</li>
<li><a href="#query">query()</a> – get historical data and forecasts from ATSD.</li>
<li><a href="#get_metrics">get_metrics()</a> – get information about the metrics collected by ATSD.</li>
<li><a href="#get_entities">get_entities()</a> – get information about the entities collected by ATSD.</li>
<li><a href="#get_series_tags">get_series_tags()</a> – get unique series tags for the metric.</li>
<li><a href="#save_series">save_series()</a> – save time series into ATSD.</li>
<li><a href="#to_zoo">to_zoo()</a> – converts a time-series data frame to ‘zoo’ object for manipulating irregular time-series with built-in functions in zoo package.</li>
</ul>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="connecting-to-atsd" class="level2">
<h2>2. <a name="connecting"></a> Connecting to ATSD</h2>
<p>Execute <code>library(atsd)</code>  to start working with the atsd package. The connection parameters are loaded from the package configuration file, <tt><font color="SaddleBrown">atsd/connection.config</font></tt>,  which is located in the atsd package folder. The command</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">installed.packages</span>()[<span class="st">&quot;atsd&quot;</span>, <span class="st">&quot;LibPath&quot;</span>]</a></code></pre></div>
<p>shows you where the atsd package folder is. Open a text editor and modify the configuration file. It should look as follows:</p>
<pre><code> # the url of ATSD including port number
 url=http://host_name:port_number   
 
 # the user name
 user=atsd_user_name
 
 # the user's password
 password=atsd_user_password   
 
 # validate ATSD SSL certificate: yes, no
 verify=no  
 
 # cryptographic protocol used by ATSD https server:
 # default, ssl2, ssl3, tls1
 encryption=ssl3   </code></pre>
<p>Reload the modified connection parameters from the configuration file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">set_connection</span>()</a></code></pre></div>
<p>Check that parameters are correct:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">show_connection</span>()</a></code></pre></div>
<p>Refer to Chapter 9 for more options on managing ATSD connection parameters.</p>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="querying-atsd" class="level2">
<h2>3. <a name="querying"></a>Querying ATSD</h2>
<p><a name="query"></a> <strong>Function name:</strong> query()</p>
<p><strong>Description:</strong> The function retrieves historical time-series data or forecasts from ATSD.</p>
<p><strong>Returns object:</strong> data frame</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">metric</font></tt>  (required, string)<br />
The name of the metric you want to get data for, for example, “disk_used_percent”.<br />
To obtain a list of metrics collected by ATSD use the <a href="#get_metrics">get_metrics()</a> function.</p></li>
<li><p><tt><font color="SaddleBrown">selection_interval</font></tt>  (required, string)<br />
This is the time interval for which the data will be selected. Specify it as “n-unit”, where<br />
unit is a Second, Minute, Hour, Day, Week, Month, Quarter, or Year and n is the number of units, for example, “3-Week” or “12-Hour”.</p></li>
<li><p><tt><font color="SaddleBrown"> entity </font></tt>  (optional, string)<br />
The name of the entity you want to get data for. If not provided, then data for all entities will be fetched for the specified metric. Obtain the list of entities with the <a href="#get_entities">get_entities()</a> function.</p></li>
<li><p><tt><font color="SaddleBrown"> entity_group </font></tt>  (optional, string)<br />
The name of entity group, for example, “HP Servers”. Extracts data for all entities belonging to this group.</p></li>
<li><p><tt><font color="SaddleBrown"> tags </font></tt>  (optional, string vector)<br />
List of user-defined series tags to filter the fetched time-series data, for example, <tt>c(“disk_name=sda1”, “mount_point=/”) </font></tt>.</p></li>
<li><p><tt><font color="SaddleBrown"> end_time </font></tt>  (optional, string)<br />
The end time of the selection interval, for example, <code>end_time = &quot;date('2014-12-27')&quot;</code>. If not provided, the current time will be used. Specify the date and time, or use one of the supported expressions: <a href="http://axibase.com/products/axibase-time-series-database/visualization/end-time/">end time syntax</a>. For example, ‘current_day’ would set the end of selection interval to 00:00:00 of the current day.</p></li>
<li><p><tt><font color="SaddleBrown">aggregate_interval</font></tt>  (optional, string)<br />
The length of the aggregation interval. The period of produced time-series will be equal to the <tt><font color="SaddleBrown">aggregate_interval</font></tt>.  The value for each period is computed by the <tt><font color="SaddleBrown">aggregate_statistics</font></tt>  function applied to all samples of the original time-series within the period. The format of the <tt><font color="SaddleBrown">aggregate_interval</font></tt>  is the same as for the <tt><font color="SaddleBrown">selection_interval</font></tt>  argument, for example, “1-Minute”.</p></li>
<li><p><tt><font color="SaddleBrown"> aggregate_statistics </font></tt>  (optional, string vector)<br />
The statistic functions used for aggregation. Multiple values are supported, for example, c(“Min”, “Avg”, “StDev”). The default value is “Avg”.</p></li>
<li><p><tt><font color="SaddleBrown"> interpolation </font></tt>  (optional, string)<br />
If aggregation is enabled, then the values for the periods without data will be computed by one of the following interpolation functions: “None”, “Linear”, “Step”. The default value is “None”.</p></li>
<li><p><tt><font color="SaddleBrown">export_type</font></tt>  (optional, string)<br />
Supported options: “History” or “Forecast”. The default value is “History”.</p></li>
<li><p><tt><font color="SaddleBrown"> verbose </font></tt>  (optional, string)<br />
If <tt>verbose = FALSE</tt>,  then all console output will be suppressed. By default, <tt>verbose = TRUE</tt>.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># get historic data for the given entity, metric, and selection_interval</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">dfr &lt;-<span class="st"> </span><span class="kw">query</span>(<span class="dt">entity =</span> <span class="st">&quot;nurswgvml007&quot;</span>, <span class="dt">metric =</span> <span class="st">&quot;cpu_busy&quot;</span>, <span class="dt">selection_interval =</span> <span class="st">&quot;1-Hour&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co"># end_time usage example</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw">query</span>(<span class="dt">entity =</span> <span class="st">&quot;host-383&quot;</span>, <span class="dt">metric =</span> <span class="st">&quot;cpu_usage&quot;</span>, <span class="dt">selection_interval =</span> <span class="st">&quot;1-Day&quot;</span>, </a>
<a class="sourceLine" id="cb5-6" data-line-number="6">      <span class="dt">end_time =</span> <span class="st">&quot;date('2015-02-10 10:15:03')&quot;</span>)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co"># get forecasts</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="kw">query</span>(<span class="dt">metric =</span> <span class="st">&quot;cpu_busy&quot;</span>, <span class="dt">selection_interval =</span> <span class="st">&quot;30-Minute&quot;</span>, </a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="dt">export_type =</span> <span class="st">&quot;Forecast&quot;</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-11" data-line-number="11"></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co"># use aggregation</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="kw">query</span>(<span class="dt">metric =</span> <span class="st">&quot;disk_used_percent&quot;</span>, <span class="dt">entity_group =</span> <span class="st">&quot;Linux&quot;</span>, </a>
<a class="sourceLine" id="cb5-14" data-line-number="14">      <span class="dt">tags =</span> <span class="kw">c</span>(<span class="st">&quot;mount_point=/boot&quot;</span>, <span class="st">&quot;file_system=/dev/sda1&quot;</span>), </a>
<a class="sourceLine" id="cb5-15" data-line-number="15">      <span class="dt">selection_interval =</span> <span class="st">&quot;1-Week&quot;</span>, <span class="dt">aggregate_interval =</span> <span class="st">&quot;1-Minute&quot;</span>,</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">      <span class="dt">aggregate_statistics =</span> <span class="kw">c</span>(<span class="st">&quot;Avg&quot;</span>, <span class="st">&quot;Min&quot;</span>, <span class="st">&quot;Max&quot;</span>), </a>
<a class="sourceLine" id="cb5-17" data-line-number="17">      <span class="dt">interpolation =</span> <span class="st">&quot;Linear&quot;</span>, <span class="dt">export_type =</span> <span class="st">&quot;Forecast&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="transforming-data-frame-to-a-zoo-object" class="level2">
<h2>4. <a name="zoo"></a>Transforming Data Frame to a zoo Object</h2>
<p><a name="to_zoo"></a> <strong>Function name:</strong> to_zoo()</p>
<p><strong>Description:</strong> The function builds a zoo object from the given data frame. The <tt><font color="SaddleBrown">timestamp</font></tt>  argument provides a column of the data frame which is used as the index for the zoo object. The <tt><font color="SaddleBrown">value</font></tt>  argument indicates the series which will be saved in a zoo object. If several columns are listed in the <tt><font color="SaddleBrown">value</font></tt>  argument, they will all be saved in a multivariate zoo object. Information from other columns is ignored. To use this function the ‘zoo’ package should be installed.</p>
<p><strong>Returns object:</strong> <a href="https://cran.R-project.org/package=zoo">zoo</a> object</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">dfr</font></tt>  (required, data frame)<br />
The data frame.</p></li>
<li><p><tt><font color="SaddleBrown">timestamp</font></tt>  (optional, character or numeric)<br />
Name or number of the column with timestamps. By default, <code>timestamp = &quot;Timestamp&quot;</code>.</p></li>
<li><p><tt><font color="SaddleBrown">value</font></tt>  (optional, character vector or numeric vector)<br />
Names or numbers of columns with series values. By default, <code>value = &quot;Value&quot;</code>.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># query ATSD for data and transform it to zoo object</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">dfr &lt;-<span class="st"> </span><span class="kw">query</span>(<span class="dt">entity =</span> <span class="st">&quot;nurswgvml007&quot;</span>, <span class="dt">metric =</span> <span class="st">&quot;cpu_busy&quot;</span>, <span class="dt">selection_interval =</span> <span class="st">&quot;1-Hour&quot;</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">z &lt;-<span class="st"> </span><span class="kw">to_zoo</span>(dfr)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="getting-metrics" class="level2">
<h2>5. <a name="metrics"></a>Getting Metrics</h2>
<p><a name="get_metrics"></a> <strong>Function name:</strong> get_metrics()</p>
<p><strong>Description:</strong> This function fetches a list of metrics and their tags from ATSD, and converts it to a data frame.</p>
<p><strong>Returns object:</strong> data frame</p>
<p>Each row of the data frame corresponds to a metric and its tags:</p>
<ul>
<li><p><tt><font color="DarkGreen"> name </font></tt> <br />
Metric name (unique)</p></li>
<li><p><tt><font color="DarkGreen"> counter </font></tt> <br />
Counters are metrics with continuously incrementing value</p></li>
<li><p><tt><font color="DarkGreen"> lastInsertTime </font></tt> <br />
Last time value was received by ATSD for this metric</p></li>
<li><p><tt><font color="DarkGreen"> tags </font></tt> <br />
User-defined tags (as requested by the “tags” argument)</p></li>
</ul>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">expression</font></tt>  (optional, string)<br />
Select metrics matching particular name pattern and/or user-defined metric tags. For examples refer to “Expression syntax” chapter.</p></li>
<li><p><tt><font color="SaddleBrown"> active</font></tt>  (optional, one of strings: “true” or “false”)<br />
Filter metrics by <tt>lastInsertTime</tt>  attribute. If <tt>active = “true”</tt>,  only metrics with positive <tt>lastInsertTime</tt>  are included in the response.</p></li>
<li><p><tt><font color="SaddleBrown">tags</font></tt>  (optional, string vector)<br />
User-defined metric tags to be included in the response. By default, all the tags will be included.</p></li>
<li><p><tt><font color="SaddleBrown">limit</font></tt>  (optional, integer)<br />
If limit &gt; 0, the response shows the top-N metrics ordered by name.</p></li>
<li><p><tt><font color="SaddleBrown">verbose</font></tt>  (optional, string)<br />
If <tt>verbose = FALSE</tt>,  then all console output will be suppressed.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># get all metrics and include all their tags in the data frame</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>()</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co"># get the first 100 active metrics which have the tag, &quot;table&quot;, </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co"># include this tag into response and exclude oter user-defined metric tags</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;tags.table != ''&quot;</span>, <span class="dt">active =</span> <span class="st">&quot;true&quot;</span>, </a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                       <span class="dt">tags =</span> <span class="st">&quot;table&quot;</span>, <span class="dt">limit =</span> <span class="dv">100</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="getting-entities" class="level2">
<h2>6. <a name="entities"></a>Getting Entities</h2>
<p><a name="get_entities"></a> <strong>Function name:</strong> get_entities()</p>
<p><strong>Description:</strong> This function fetches a list of entities and their tags from ATSD, and converts it to a data frame.</p>
<p><strong>Returns object:</strong> data frame</p>
<p>Each row of the data frame corresponds to an entity and its tags:</p>
<ul>
<li><p><tt><font color="DarkGreen"> name </font></tt> <br />
Entity name (unique)</p></li>
<li><p><tt><font color="DarkGreen"> enabled </font></tt> <br />
Enabled status, incoming data is discarded for disabled entities</p></li>
<li><p><tt><font color="DarkGreen"> lastInsertTime </font></tt> <br />
Last time value was received by ATSD for this entity</p></li>
<li><p><tt><font color="DarkGreen"> tags </font></tt> <br />
User-defined tags (as requested by the “tags” argument)</p></li>
</ul>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">expression</font></tt>  (optional, string)<br />
Select entities matching particular name pattern and/or user-defined entity tags. For examples refer to “Expression syntax” chapter.</p></li>
<li><p><tt><font color="SaddleBrown"> active</font></tt>  (optional, one of strings: “true” or “false”)<br />
Filter entities by <tt>lastInsertTime</tt>  attribute. If <tt>active = “true”</tt>,  only entities with positive <tt>lastInsertTime</tt>  are included in the response.</p></li>
<li><p><tt><font color="SaddleBrown">tags</font></tt>  (optional, string vector)<br />
User-defined entity tags to be included in the response. By default, all the tags will be included.</p></li>
<li><p><tt><font color="SaddleBrown">limit</font></tt>  (optional, integer)<br />
If limit &gt; 0, the response shows the top-N entities ordered by name.</p></li>
<li><p><tt><font color="SaddleBrown">verbose</font></tt>  (optional, string)<br />
If <tt>verbose = FALSE</tt>,  then all console output will be suppressed.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># get all entities</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">entities &lt;-<span class="st"> </span><span class="kw">get_entities</span>()</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># select entities by name and user-defined tag &quot;app&quot; </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">entities &lt;-<span class="st"> </span><span class="kw">get_entities</span>(<span class="dt">expression =</span> </a>
<a class="sourceLine" id="cb8-6" data-line-number="6">                         <span class="st">&quot;name like 'nur*' and lower(tags.app) like '*hbase*'&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="getting-time-series-tags" class="level2">
<h2>7. <a name="gtst"></a> Getting Time Series Tags</h2>
<p><a name="get_series_tags"></a> <strong>Function name:</strong> get_series_tags()</p>
<p><strong>Description:</strong> The function determines time series collected by ATSD for a given metric. For each time series it lists tags associated with the series, and last time the series was updated. The list of fetched time series is based on data stored on disk for the last 24 hours.</p>
<p><strong>Returns object:</strong> data frame</p>
<p>Each row of the data frame corresponds to a time series and its tags:</p>
<ul>
<li><p><tt><font color="DarkGreen"> entity </font></tt> <br />
Name of entity which generate the time series.</p></li>
<li><p><tt><font color="DarkGreen"> lastInsertTime </font></tt> <br />
Last time value was received by ATSD for this time series.</p></li>
<li><p><tt><font color="DarkGreen"> tags </font></tt> <br />
Tags of the series.</p></li>
</ul>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">metric</font></tt>  (required, string)<br />
The name of the metric you want to get time series for, for example, “disk_used_percent”.<br />
To obtain a list of metrics collected by ATSD use the <a href="#get_metrics">get_metrics()</a> function.</p></li>
<li><p><tt><font color="SaddleBrown"> entity </font></tt>  (optional, string)<br />
The name of the entity you want to get time series for. If not provided, then data for all entities will be fetched for the specified metric. Obtain the list of entities with the <a href="#get_entities">get_entities()</a> function.</p></li>
<li><p><tt><font color="SaddleBrown">verbose</font></tt>  (optional, string)<br />
If <tt>verbose = FALSE</tt>,  then all console output will be suppressed.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># get all time series and their tags collected by ATSD for the &quot;disk_used_percent&quot; metric</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">tags &lt;-<span class="st"> </span><span class="kw">get_series_tags</span>(<span class="dt">metric =</span> <span class="st">&quot;disk_used_percent&quot;</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># get all time series and their tags for the &quot;disk_used_percent&quot; metric</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># end &quot;nurswgvml007&quot; entity</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw">get_series_tags</span>(<span class="dt">metric =</span> <span class="st">&quot;disk_used_percent&quot;</span>, <span class="dt">entity =</span> <span class="st">&quot;nurswgvml007&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="saving-time-series-in-atsd" class="level2">
<h2>8. <a name="saving_ts"></a> Saving Time-series in ATSD</h2>
<p><a name="save_series"></a> <strong>Function name:</strong> save_series()</p>
<p><strong>Description:</strong> Save time-series from the data frame into ATSD. The data frame should have a column with timestamps and at least one numeric column with values of a metric.</p>
<p><strong>Returns object:</strong> NULL</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown">dfr</font></tt>  (required, data frame)<br />
The data frame should have a column with timestamps and at least one numeric column with values of a metric.</p></li>
<li><p><tt><font color="SaddleBrown">time_col</font></tt>  (optional, numeric or character)<br />
Number or name of the column with the timestamps. Default value is 1. For example, <tt><font color="SaddleBrown">time_col = 1</font></tt>,  or <tt><font color="SaddleBrown">time_col = “Timestamp”</font></tt>.  Read “Timestamps format” section below for supported timestamp classes and formats.</p></li>
<li><p><tt><font color="SaddleBrown"> time_format</font></tt>  (optional, string)<br />
Optional string argument, indicates format of timestamps. This argument is used in the case when timestamp format is not clear from their class. The value of this argument can be one of the following: <code>&quot;ms&quot;</code> (for epoch milliseconds), <code>&quot;sec&quot;</code> (for epoch seconds), or a format string, for example <code>&quot;\%Y-\%m-\%d \%H:\%M:\%S&quot;</code>. This format string will be used to convert the provided timestamps to epoch milliseconds before storing the timestamps in ATSD. Read “Timestamp format” section for details.</p></li>
<li><p><tt><font color="SaddleBrown"> tz</font></tt>  (optional, string)<br />
By default, <code>tz = &quot;GMT&quot;</code>. Specify time zone, when timestamps are strings formatted as described in the <tt><font color="SaddleBrown">time_format</font></tt>  argument. For example, <code>tz = &quot;Australia/Darwin&quot;</code>. View the “TZ” column of <a href="http://en.wikipedia.org/wiki/Zone.tab">the time zones table</a> for a list of possible values.</p></li>
<li><p><tt><font color="SaddleBrown"> metric_col</font></tt>  (required, numeric or character vector)<br />
Specifies numbers or names of the columns where metric values are stored. For example, <code>metric_col = c(2, 3, 4)</code>, or <code>metric_col = c(&quot;Value&quot;, &quot;Avg&quot;)</code>. If <tt><font color="SaddleBrown">metric_name</font></tt>  argument is not given, then names of columns, in lower case, are used as metric names when saving them in ATSD.</p></li>
<li><p><tt><font color="SaddleBrown">metric_name</font></tt>  (optional, character vector)<br />
Specifies metric names. The series indicated by <tt><font color="SaddleBrown">metric_col</font></tt>  argument are saved in ATSD along with metric names, provided by the <tt><font color="SaddleBrown">metric_name</font></tt> . So the number and order of names in the <tt><font color="SaddleBrown">metric_name</font></tt>  should match to columns in &lt;tt&gt;<font color="SaddleBrown">metric_col</font></tt> . If <tt><font color="SaddleBrown">metric_name</font></tt>  argument is not provided, then names of columns, in lower case, are used as metric names when saving them in ATSD.</p></li>
<li><p><tt><font color="SaddleBrown"> entity_col</font></tt>  (optional, numeric or character)<br />
Optional argument, should be provided if the entity argument is not given. Number or name of a column with entities. Several entities in the column are allowed. For example, <code>entity_col = 4</code>, or <code>entity_col = &quot;server001&quot;</code>.</p></li>
<li><p><tt><font color="SaddleBrown"> entity</font></tt>  (optional, character)<br />
Should be provided if the <tt><font color="SaddleBrown">entity_col</font></tt>  argument is not given. Name of the entity.</p></li>
<li><p><tt><font color="SaddleBrown"> tags_col</font></tt>  (optional, numeric or character vector)<br />
Lists numbers or names of the columns containing tag values. So the name of a column is a tag name, and values in the column are the tag values.</p></li>
<li><p><tt><font color="SaddleBrown"> tags</font></tt>  (optional, character vector)<br />
Lists tags and their values in “tag=value” format. Each indicated tag will be saved with each series.</p></li>
<li><p><tt><font color="SaddleBrown">verbose</font></tt>  (optional, string)<br />
If <tt>verbose = FALSE</tt>,  then all console output will be suppressed.</p></li>
</ul>
<p><strong>Timestamp format.</strong></p>
<p>The list of allowed timestamp types.</p>
<ul>
<li><p>Numeric, in epoch milliseconds or epoch seconds. In that case <code>time_format = &quot;ms&quot;</code> or <code>time_format = &quot;sec&quot;</code> should be used, and time zone argument <tt><font color="SaddleBrown">tz</font></tt>  is ignored.</p></li>
<li><p>Object of one of type <code>Date</code>, <code>POSIXct</code>, <code>POSIXlt</code>, <code>chron</code> from the <code>chron</code> package or <code>timeDate</code> from the <code>timeDate</code> package. In that case arguments <tt><font color="SaddleBrown">time_format</font></tt>  and <tt><font color="SaddleBrown">tz</font></tt>  are ignored.</p></li>
<li><p>String, for example, “2015-01-03 10:07:15”. In this case <tt><font color="SaddleBrown">time_format</font></tt>  argument should specify which format string is used for the timestamps. For example, <code>time_format = &quot;\%Y-\%m-\%d \%H:\%M:\%S&quot;</code>. Type <code>?strptime</code> to see list of format symbols. This format string will be used to convert provided timestamps to epoch milliseconds before storing the timestamps in ATSD. So time zone, as written in <tt><font color="SaddleBrown">tz</font></tt>  argument, and standard origin “1970-01-01 00:00:00” are used for conversion. In fact conversion is done with use of command: <code>as.POSIXct(time_stamp, format = time_format, origin=&quot;1970-01-01&quot;, tz = tz)</code>.</p></li>
</ul>
<p>Note that timestamps will be stored in epoch milliseconds. So if you put some data into ATSD and then retrieve it back, the timestamps will refer to the same time but in GMT time zone. For example, if you save timestamp <code>&quot;2015-02-15 10:00:00&quot;</code> with <code>tz = &quot;Australia/Darwin&quot;</code> in ATSD, and then retrieve it back, you will get the timestamp <code>&quot;2015-02-15 00:30:00&quot;</code> because Australia/Darwin time zone has a +09:30 shift relative to the GMT zone.</p>
<p><strong>Entity specification</strong></p>
<p>You can provide entity name in one of <tt><font color="SaddleBrown">entity</font></tt>  or <tt><font color="SaddleBrown">entity_col</font></tt>  arguments. In the first case all series will have the same entity. In the second case, entities specified in <tt><font color="SaddleBrown">entity_col</font></tt>  column will be saved along with corresponding series.</p>
<p><strong>Tags specification</strong></p>
<p>The <tt><font color="SaddleBrown">tags_col</font></tt>  argument indicates which columns of the data frame keeps the time-series tags. The name of each column specified by the <tt><font color="SaddleBrown">tags_col</font></tt>  argument is a tag name, and the values in the column are tag values.</p>
<p>Before storing the series in ATSD, the data frame will be split into several data frames, each of them has a unique entity and unique list of tag values. This entity and tags are stored in ATSD along with the time-series from the data frame. NA’s and missing values in time-series will be ignored.</p>
<p>In <tt><font color="SaddleBrown">tags</font></tt>  argument you can specify tags which are the same for all rows (records) of the data frame. So each series value saved in ATSD will have tags, provided in the <tt><font color="SaddleBrown">tags</font></tt>  argument.</p>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Save time-series from columns 3, 4, 5 of data frame dfr.</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co"># Timestamps are saved as strings in 2nd column </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># and their format string and time zone are provided.</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># Entities and tags are in columns 1, 6, 7.</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co"># All saved series will have tag &quot;os_type&quot; with value &quot;linux&quot;.</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">save_series</span>(dfr, <span class="dt">time_col =</span> <span class="dv">2</span>, <span class="dt">time_format =</span> <span class="st">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, <span class="dt">tz =</span> <span class="st">&quot;Australia/Darwin&quot;</span>, </a>
<a class="sourceLine" id="cb10-7" data-line-number="7">            <span class="dt">metric_col =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="dt">entity_col =</span> <span class="dv">1</span>, <span class="dt">tags_col =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">7</span>), </a>
<a class="sourceLine" id="cb10-8" data-line-number="8">            <span class="dt">tags =</span> <span class="st">&quot;os_type = linux&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="expression-syntax" class="level2">
<h2>9. <a name="expression"></a> Expression Syntax</h2>
<p>In this section, we explain the syntax of the <tt><font color="SaddleBrown">expression</font></tt>  argument of the functions <code>get_metrics()</code>   and <code>get_entities()</code>. The <tt><font color="SaddleBrown">expression</font></tt>  is used to filter result for which <tt><font color="SaddleBrown">expression</font></tt>  evaluates to <code>TRUE</code> .</p>
<p>The variable <code>name</code> is used to select metrics/entities by names:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># get metric with name 'cpu_busy'</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;name = 'cpu_busy'&quot;</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Metrics and entities have user-defined tags. Each of these tags is a pair (“tag_name” : “tag_value”). The variable <code>tags.tag_name</code>  in an expression refers to the <code>tag_value</code> for given metric/entity. If a metric/entity does not have this tag, the <code>tag_value</code> will be an empty string.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># get metrics without 'source' tag, and include all tags of fetched metrics in output</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;tags.source != ''&quot;</span>, <span class="dt">tags =</span> <span class="st">&quot;*&quot;</span>)</a></code></pre></div>
<p>To get metrics with a user-defined tag ‘table’ equal to ‘System’:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># get metrics whose tag 'table' is equal to 'System'</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;tags.table = 'System'&quot;</span>, <span class="dt">tags =</span> <span class="st">&quot;*&quot;</span>)</a></code></pre></div>
<!---
So in the expression, you could use the variable `name`&nbsp; whose value is the name
of the metric/entity, variables whose names are names of the user defined tags,
and values are values of these tags.
-->
<p>To build more complex expressions, use brackets <code>(</code>, <code>)</code>, and <code>and</code>, <code>or</code>, <code>not</code>  logical operators as well as <code>&amp;&amp;</code> , <code>||</code>, <code>!</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">entities &lt;-<span class="st"> </span><span class="kw">get_entities</span>(<span class="dt">expression =</span> <span class="st">&quot;tags.app != '' and (tags.os != '' or tags.ip != '')&quot;</span>)</a></code></pre></div>
<p>To test if a string is in a collections, use <code>in</code>  operator:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">get_entities</span>(<span class="dt">expression =</span> <span class="st">&quot;name in ('derby-test', 'atom.axibase.com')&quot;</span>)</a></code></pre></div>
<p>Use <code>like</code>  operator to match values with expressions containing wildcards: <code>expression = &quot;name like 'disk*'&quot;</code> . The wildcard <code>*</code>  mean zero or more characters. The wildcard <code>.</code>  means any one character.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;name like '*cpu*' and tags.table = 'System'&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># get metrics with names consisting of 3 letters</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">metrics &lt;-<span class="st"> </span><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;name like '...'&quot;</span>)</a></code></pre></div>
<p>There are additional functions you can use in an expression:</p>
<ul>
<li><p><code>list(string, delimeter))</code>  Splits the string by delimeter. The default delimiter is a comma.</p></li>
<li><p><code>upper(string)</code>  Converts the string argument to upper case.</p></li>
<li><p><code>lower(string)</code>  Converts the string argument to lower case.</p></li>
<li><p><code>collection(name)</code>  Refers to a named collection of strings created in ATSD.</p></li>
<li><p><code>likeAll(string, collection of patterns)</code>  Returns true if every element in the collection of patterns matches the given string.</p></li>
<li><p><code>likeAny(string, collection of patterns)</code>  Returns true if at least one element in the collection of patterns matches the given string.</p></li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;likeAll(lower(name), list('cpu*,*use*'))&quot;</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;likeAny(lower(name), list('cpu*,*use*'))&quot;</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">get_metrics</span>(<span class="dt">expression =</span> <span class="st">&quot;name in collection('fs_ignore')&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>
<section id="advanced-connection-options" class="level2">
<h2>10. <a name="advanced"></a> Advanced Connection Options</h2>
<p>The atsd package uses connection parameters to connect with ATSD. These parameters are:</p>
<ul>
<li><p><tt><font color="SaddleBrown">url</font></tt>  - the url of ATSD including port number</p></li>
<li><p><tt><font color="SaddleBrown">user</font></tt>  - the user name</p></li>
<li><p><tt><font color="SaddleBrown">password</font></tt>  - the user’s password</p></li>
<li><p><tt><font color="SaddleBrown">verify</font></tt>  - should ATSD SSL certificate be validated</p></li>
<li><p><tt><font color="SaddleBrown">encryption</font></tt>  - cryptographic protocol used by ATSD https server</p></li>
</ul>
<p>The configuration parameters are loaded from the package configuration file when you load the atsd package into R. (See Section 2.)</p>
<p>The functions <code>show_connection()</code>,  <code>set_connection()</code>,  and <code>save_connection()</code>,  show configuration parameters, change them, and store them in the configuration file.</p>
<p><br> <a name="show_connection"></a> <strong>Function name:</strong> show_connection()</p>
<p><strong>Returns object:</strong> NULL</p>
<p><strong>Description:</strong> The function prints current values of the connection parameters. (They may be different from the values in the configuration file.)</p>
<p><strong>Arguments:</strong> no</p>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">show_connection</span>()</a></code></pre></div>
<p><br> <a name="set_connection"></a> <strong>Function name:</strong> set_connection()</p>
<p><strong>Returns object:</strong> NULL</p>
<p><strong>Description:</strong> The function overrides the connection parameters for the duration of the current R session without changing the configuration file. If called without arguments the function sets the connection parameters from the configuration file. If the <tt><font color="SaddleBrown">file</font></tt>  argument is provided the function use it. In both cases the current values of the parameters became the same as in the file. In case the <tt><font color="SaddleBrown">file</font></tt>  argument is not provided, but some of other arguments are specified, the only specified parameters will be changed.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown"> url </font></tt>  (optional, string)<br />
The url of ATSD including port number.</p></li>
<li><p><tt><font color="SaddleBrown"> user </font></tt>  (optional, string)<br />
The user name.</p></li>
<li><p><tt><font color="SaddleBrown"> password </font></tt>  (optional, string)<br />
The user’s password.</p></li>
<li><p><tt><font color="SaddleBrown"> verify </font></tt>  (optional, string)<br />
String - “yes” or “no”, <code>verify = &quot;yes&quot;</code>  ensures validation of ATSD SSL certificate and <code>verify = &quot;no&quot;</code>  suppresses the validation (applicable in the case of ‘https’ protocol).</p></li>
<li><p><tt><font color="SaddleBrown"> encryption </font></tt>  (optional, string)<br />
Cryptographic protocol used by ATSD https server. Possible values are: “default”, “ssl2”, “ssl3”, and “tls1” (In most cases, use “ssl3” or “tls1”.)</p></li>
<li><p><tt><font color="SaddleBrown"> file</font></tt>  (optional, string)<br />
The absolute path to the file from which the connection parameters could be read. The file should be formatted as the package configuration file, see Section 2.</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Modify the user </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">set_connection</span>(<span class="dt">user =</span> <span class="st">&quot;user001&quot;</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co"># Modify the cryptographic protocol </span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="kw">set_connection</span>(<span class="dt">encryption =</span> <span class="st">&quot;tls1&quot;</span>)</a>
<a class="sourceLine" id="cb20-6" data-line-number="6"></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co"># Set the parameters of the https connection: url, user name, password </span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co"># should the certificate of the server be verifyed </span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co"># which cryptographic protocol is used for communication</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="kw">set_connection</span>(<span class="dt">url =</span> <span class="st">&quot;https://my.company.com:8443&quot;</span>, </a>
<a class="sourceLine" id="cb20-11" data-line-number="11">               <span class="dt">user =</span> <span class="st">&quot;user001&quot;</span>, </a>
<a class="sourceLine" id="cb20-12" data-line-number="12">               <span class="dt">password =</span> <span class="st">&quot;123456&quot;</span>, </a>
<a class="sourceLine" id="cb20-13" data-line-number="13">               <span class="dt">verify =</span> <span class="st">&quot;no&quot;</span>, </a>
<a class="sourceLine" id="cb20-14" data-line-number="14">               <span class="dt">encryption =</span> <span class="st">&quot;ssl3&quot;</span>)</a>
<a class="sourceLine" id="cb20-15" data-line-number="15"></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co"># Set up the connection parameters from the file:</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="kw">set_connection</span>(<span class="dt">file =</span> <span class="st">&quot;/home/user001/atsd_https_connection.txt&quot;</span>)</a></code></pre></div>
<p><br> <a name="save_connection"></a> <strong>Function name:</strong> save_connection()</p>
<p><strong>Returns object:</strong> NULL</p>
<p><strong>Description:</strong> The function writes the connection parameters into the configuration file. If called without arguments the functions use current values of the connection parameters (including NAs). Otherwise only the provided arguments will be written to the configuration file. If configuration file is absent it will be created in the atsd package folder. <strong>Arguments:</strong></p>
<ul>
<li><p><tt><font color="SaddleBrown"> url </font></tt>  (optional, string)<br />
The url of ATSD including port number.</p></li>
<li><p><tt><font color="SaddleBrown"> user </font></tt>  (optional, string)<br />
The user name.</p></li>
<li><p><tt><font color="SaddleBrown"> password </font></tt>  (optional, string)<br />
The user’s password.</p></li>
<li><p><tt><font color="SaddleBrown"> verify </font></tt>  (optional, string)<br />
String - “yes” or “no”, <code>verify = &quot;yes&quot;</code>  ensures validation of ATSD SSL certificate and <code>verify = &quot;no&quot;</code>  suppresses the validation (applicable in the case of ‘https’ protocol).</p></li>
<li><p><tt><font color="SaddleBrown"> encryption </font></tt>  (optional, string)<br />
Cryptographic protocol used by ATSD https server. Possible values are: “default”, “ssl2”, “ssl3”, and “tls1” (In most cases, use “ssl3” or “tls1”.)</p></li>
</ul>
<p><strong>Examples:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Write the current values of the connection parameters to the configuration file.</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">save_connection</span>()</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"> </a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co"># Write the user name and password in the configuration file.</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="kw">save_connection</span>(<span class="dt">user =</span> <span class="st">&quot;user00&quot;</span>, <span class="dt">password =</span> <span class="st">&quot;123456&quot;</span>)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6"> </a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co"># Write all parameters nedeed for the https connection to the configuration file.</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="kw">save_connection</span>(<span class="dt">url =</span> <span class="st">&quot;https://my.company.com:8443&quot;</span>, </a>
<a class="sourceLine" id="cb21-9" data-line-number="9">                <span class="dt">user =</span> <span class="st">&quot;user001&quot;</span>, </a>
<a class="sourceLine" id="cb21-10" data-line-number="10">                <span class="dt">password =</span> <span class="st">&quot;123456&quot;</span>, </a>
<a class="sourceLine" id="cb21-11" data-line-number="11">                <span class="dt">verify =</span> <span class="st">&quot;no&quot;</span>, </a>
<a class="sourceLine" id="cb21-12" data-line-number="12">                <span class="dt">encryption =</span> <span class="st">&quot;ssl3&quot;</span>)</a></code></pre></div>
<p><a href="#contents">Return to Contents</a></p>
</section>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
